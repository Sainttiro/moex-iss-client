# Описание Состояния Проекта

Этот документ описывает текущее состояние проекта `moex-iss-client` на момент последнего коммита. Он предназначен для быстрого введения в курс дела новых разработчиков и ИИ-ассистентов.

## Обзор проекта

`moex-iss-client` — это Python-клиент для взаимодействия с API Информационно-статистического сервера (ИСС) Московской Биржи.

### Основные возможности:
- Аутентификация с использованием логина и пароля.
- Загрузка исторических данных по ценным бумагам.
- Сохранение данных в формате JSON.
- Удобный интерфейс командной строки (CLI).

## Технологический стек

- **Язык:** Python 3.8+
- **HTTP-клиент:** `requests`
- **CLI-фреймворк:** `click`
- **Конфигурация:** `pydantic` и `python-dotenv`
- **Форматирование вывода:** `rich`
- **Сборка и управление зависимостями:** `pyproject.toml` (setuptools)

## Архитектура

Проект имеет модульную структуру:

- `src/moex_client/client/api.py`: Основной класс `MoexClient`, отвечающий за запросы к API и обработку данных.
- `src/moex_client/auth/api.py`: Класс `MoexAuth` для аутентификации и получения сессионных cookie.
- `src/moex_client/config/settings.py`: Управление конфигурацией через переменные окружения с помощью `pydantic`.
- `src/moex_client/cli/main.py`: Реализация CLI с помощью `click`. Основная команда — `history` для загрузки данных.

## Текущие задачи

Основная задача — реализовать прямую загрузку данных в ClickHouse, минуя промежуточное сохранение в JSON.

### План реализации:
1.  Настроить окружение для ClickHouse с помощью Docker.
2.  Добавить параметры подключения к ClickHouse в конфигурацию.
3.  Создать модуль для работы с ClickHouse (создание таблиц, вставка данных).
4.  Модифицировать команду `history` для поддержки прямой загрузки в ClickHouse.
